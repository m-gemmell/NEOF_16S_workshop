# Metadata validation and Sequence import

## Metadata validation
```{r, fig.align = 'center',out.width= '20%', echo=FALSE }
knitr::include_graphics(path = "figures/true_or_false.png", auto_pdf = TRUE)
``` 

The first step we will carry out is to validate our metadata file. This will inform us if our metadata file is in the correct format or not.


## Sequence import
```{r, fig.align = 'center',out.width= '20%', echo=FALSE }
knitr::include_graphics(path = "figures/import.png", auto_pdf = TRUE)
``` 

Now it is time to import our read pairs into a QIIME2 artifact.

__Note__: It is quite easy to make typos in the following command. Ensure to read any errors carefully to try to figure out where a typo is, if any.

```{bash, eval=FALSE}
qiime tools import --type 'SampleData[PairedEndSequencesWithQuality]' \
 --input-path PairedEndFastqManifestPhred33.csv \
 --output-path paired-end-demux.qza \
 --input-format PairedEndFastqManifestPhred33
```
 
This command will use the information contained in the ‘manifest file’ to create the ‘paired-end-demux.qza’. 

The "demux" part of the file name indicates that the samples are already demultiplexed (i.e. sequences have benn sperarated by samples). Additonally, QIIME2 artifacts use "-" as word seperators in file names.  This is not mandatory but it is a good practice to keep consistent with the QIIME2 developers.

To visualise the samples loaded, the following command will create a visualisation artifact.

```{bash, eval=FALSE}
qiime demux summarize --i-data paired-end-demux.qza \
--o-visualization paired-end-demux.qzv
```

__Chrome__

This next step is important! Make sure to open a new terminal and open chrome in it. Keep this terminal and chrome open (To open a new terminal, right click on the main screen, choose `Applications` -> `Shell` -> `bash`). Opening and closing chrome multiple times has proven to cause issues in past workshops. To open the browser ‘chrome’, run:

```{bash, eval=FALSE}
chrome.sh
```

Form now on leave the terminal you ran the above command on alone.

Then:

- Type the following web-site: ‘view.qiime2.org’
- Click on ‘Drag and drop or click here’ panel
- You can browse now to find and select the file ‘paired-end-demux.qzv’

__Questions__: 

- Are the sequences evenly distributed across samples?
- Which sample has the lowest number of sequences? 
- Is there any sample with a low final number of sequences? 
- Are there any samples that can be excluded? 
- What is the average sequence count per sample?
- How is the overall quality for the sequences?
